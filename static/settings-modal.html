<div id="settings-overlay" class="settings-overlay hidden">
  <div class="settings-modal" role="dialog" aria-modal="true" aria-labelledby="settings-title">
    <div class="settings-header">
      <div class="settings-title-group">
        <h2 id="settings-title" class="settings-title">Settings</h2>
        <div class="settings-subtitle">Preferences are stored per browser on this device.</div>
      </div>
      <button
        type="button"
        id="settings-close-btn"
        class="settings-header-close"
        aria-label="Close settings"
      >
        &times;
      </button>
    </div>
    <div class="settings-body">
      <nav class="settings-nav" aria-label="Settings categories">
        <button
          type="button"
          class="settings-nav-item selected"
          data-category="general"
        >
          General
        </button>
        <button
          type="button"
          class="settings-nav-item"
          data-category="versioning"
        >
          Versioning
        </button>
        <button
          type="button"
          class="settings-nav-item"
          data-category="appearance"
        >
          Appearance
        </button>
      </nav>
      <div class="settings-content">
        <section class="settings-category-panel" data-category="general">
          <h3 class="settings-category-title">General</h3>
          <div class="settings-field">
            <label class="settings-field-label">
              <input type="checkbox" id="settings-editor-spellcheck" />
              Enable spellcheck in the editor
            </label>
            <p class="settings-field-description">
              When enabled, the browser's built-in spellchecker will be active in the markdown editor.
            </p>
          </div>
          <div class="settings-field">
            <label class="settings-field-label" for="settings-index-page-title">
              Index page title
            </label>
            <input
              type="text"
              id="settings-index-page-title"
              class="settings-input-text"
              placeholder="NoteBooks"
            />
            <p class="settings-field-description">
              Sets the title shown in the header and browser tab on the index page.
            </p>
          </div>
          <div class="settings-field">
            <div class="settings-field-label">Notebook export / import</div>
            <button type="button" id="settings-export-notebook-btn" class="settings-btn">
              Export Notebook
            </button>
            <button type="button" id="settings-import-notebook-btn" class="settings-btn">
              Import Notebook
            </button>
            <p class="settings-field-description">
              Export downloads a zip archive of the notebook (notes and core project files). Import restores notes into the current notebook from a previously exported zip.
            </p>
          </div>
        </section>
        <section class="settings-category-panel hidden" data-category="versioning">
          <h3 class="settings-category-title">Versioning</h3>
          <div class="settings-field">
            <label class="settings-field-label">
              <input type="checkbox" id="settings-auto-commit-notes" />
              Automatically commit and push notes after saving
            </label>
            <p class="settings-field-description">
              When enabled, saving a note will also commit and push changes in the notes Git repository.
            </p>
          </div>
          <div class="settings-field">
            <label class="settings-field-label">
              <input type="checkbox" id="settings-auto-pull-notes" />
              Automatically pull notes from the repository
            </label>
            <p class="settings-field-description">
              When enabled, the app will periodically pull changes from the notes Git repository.
            </p>
          </div>
          <div class="settings-field">
            <label class="settings-field-label" for="settings-auto-pull-interval">
              Auto-pull interval (minutes)
            </label>
            <input
              type="number"
              id="settings-auto-pull-interval"
              class="settings-input-number"
              min="1"
            />
            <p class="settings-field-description">
              How often to check for and pull updates when automatic notes pulling is enabled.
            </p>
          </div>
          <div class="settings-field">
            <div class="settings-field-label">Repositories &amp; GitHub API<br></div>
            <p class="settings-field-description">
              Notes repo path: <code id="versioning-notes-root">Loading…</code>
            </p>
            <p class="settings-field-description">
              Notes remote URL: <code id="versioning-notes-remote-url">Loading…</code>
            </p>
            <p class="settings-field-description">
              GitHub API key: <span id="versioning-github-api-key-status">Loading…</span>
            </p>
          </div>
          <div class="settings-field">
            <div class="settings-field-label">Git history</div>
            <div class="settings-field-description">
              <button
                type="button"
                id="versioning-view-app-history-btn"
                class="settings-btn"
              >
                View app repository history
              </button>
              <button
                type="button"
                id="versioning-view-notes-history-btn"
                class="settings-btn"
              >
                View notes repository history
              </button>
            </div>
            <div class="settings-field-description">
              <div
                id="versioning-git-history-popup"
                class="settings-git-history-popup hidden"
                role="dialog"
                aria-modal="true"
                aria-labelledby="versioning-git-history-title"
              >
                <div class="settings-header">
                  <div class="settings-title-group">
                    <h3
                      id="versioning-git-history-title"
                      class="settings-title"
                    >
                      Git history
                    </h3>
                  </div>
                  <button
                    type="button"
                    id="versioning-git-history-close-btn"
                    class="settings-header-close"
                    aria-label="Close git history"
                  >
                    &times;
                  </button>
                </div>
                <div
                  id="versioning-git-history-body"
                  class="settings-field-description"
                ></div>
              </div>
            </div>
          </div>
        </section>
        <section class="settings-category-panel hidden" data-category="appearance">
          <h3 class="settings-category-title">Appearance</h3>
          <div class="settings-field">
            <label class="settings-field-label" for="settings-theme">
              Theme
            </label>
            <select id="settings-theme" class="settings-select">
              <option value="gruvbox-dark">Gruvbox dark (default)</option>
              <option value="office">Office</option>
              <option value="high-contrast">High contrast</option>
            </select>
            <p class="settings-field-description">
              Changes are previewed immediately. Click Save to keep them.
            </p>
          </div>
          <div class="settings-field">
            <label class="settings-field-label" for="settings-export-theme">
              Export theme
            </label>
            <select id="settings-export-theme" class="settings-select">
              <option value="match-app-theme">Match app theme (default)</option>
              <option value="gruvbox-dark">Gruvbox dark</option>
              <option value="office">Office</option>
              <option value="high-contrast">High contrast</option>
            </select>
            <p class="settings-field-description">
              Chooses the theme used when exporting a note as HTML.
            </p>
          </div>
        </section>
      </div>
    </div>
    <div class="settings-footer">
      <button type="button" id="settings-cancel-btn" class="settings-btn">
        Cancel
      </button>
      <button type="button" id="settings-save-btn" class="settings-btn settings-btn-primary">
        Save
      </button>
    </div>
  </div>
</div>
